<p id="notice"><%= notice %></p>

<h1>Listing References</h1>

<table>
  <thead>
  <tr>
    <th>Shortname</th>
    <th>Type</th>
    <th colspan="8"></th>
  </tr>
  </thead>

  <tbody>
  <% @bibrefs.each do |bibref| %>
      <tr>
        <td><%= bibref.shortname %></td>
        <td><%= bibref.reftype %></td>

        <% reqfields = bibref.get_required_fields %>

        <% max_req_fields = 5
           req_fields_count = 0 %>

        <% reqfields.each do |field| %>

            <% req_fields_count += 1 %>

            <td><%= field.content %></td>
        <% end %>

        <% (max_req_fields - req_fields_count).times do %>
            <td></td>
        <% end %>

        <td><%= link_to 'Show', bibref %></td>
        <td><%= link_to 'Edit', edit_bibref_path(bibref) %></td>
        <td><%= link_to 'Destroy', bibref, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Reference', new_bibref_path %> |
<%= link_to 'List references as BibTeX', bibtex_list_bibrefs_path %> |
<%= link_to 'Download as .bib file', download_bibrefs_path %>